(function(f,m){typeof exports=="object"&&typeof module<"u"?module.exports=m():typeof define=="function"&&define.amd?define(m):(f=typeof globalThis<"u"?globalThis:f||self,f.select=m())})(this,function(){"use strict";var es=Object.defineProperty;var rs=(f,m,T)=>m in f?es(f,m,{enumerable:!0,configurable:!0,writable:!0,value:T}):f[m]=T;var c=(f,m,T)=>(rs(f,typeof m!="symbol"?m+"":m,T),T);function f(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var m=typeof global=="object"&&global&&global.Object===Object&&global,T=typeof self=="object"&&self&&self.Object===Object&&self,j=m||T||Function("return this")(),Z=function(){return j.Date.now()},ve=/\s/;function ye(t){for(var e=t.length;e--&&ve.test(t.charAt(e)););return e}var be=/^\s+/;function _e(t){return t&&t.slice(0,ye(t)+1).replace(be,"")}var $=j.Symbol,mt=Object.prototype,Se=mt.hasOwnProperty,xe=mt.toString,R=$?$.toStringTag:void 0;function Ee(t){var e=Se.call(t,R),r=t[R];try{t[R]=void 0;var n=!0}catch{}var i=xe.call(t);return n&&(e?t[R]=r:delete t[R]),i}var Ae=Object.prototype,Te=Ae.toString;function je(t){return Te.call(t)}var we="[object Null]",Ce="[object Undefined]",Ot=$?$.toStringTag:void 0;function U(t){return t==null?t===void 0?Ce:we:Ot&&Ot in Object(t)?Ee(t):je(t)}function F(t){return t!=null&&typeof t=="object"}var Ie="[object Symbol]";function z(t){return typeof t=="symbol"||F(t)&&U(t)==Ie}var vt=NaN,$e=/^[-+]0x[0-9a-f]+$/i,Fe=/^0b[01]+$/i,Ne=/^0o[0-7]+$/i,Le=parseInt;function yt(t){if(typeof t=="number")return t;if(z(t))return vt;if(f(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=f(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=_e(t);var r=Fe.test(t);return r||Ne.test(t)?Le(t.slice(2),r?2:8):$e.test(t)?vt:+t}var Pe="Expected a function",Me=Math.max,Re=Math.min;function Ue(t,e,r){var n,i,s,o,a,l,p=0,g=!1,y=!1,C=!0;if(typeof t!="function")throw new TypeError(Pe);e=yt(e)||0,f(r)&&(g=!!r.leading,y="maxWait"in r,s=y?Me(yt(r.maxWait)||0,e):s,C="trailing"in r?!!r.trailing:C);function I(d){var A=n,q=i;return n=i=void 0,p=d,o=t.apply(q,A),o}function k(d){return p=d,a=setTimeout(Y,e),g?I(d):o}function Zi(d){var A=d-l,q=d-p,Oe=e-A;return y?Re(Oe,s-q):Oe}function ge(d){var A=d-l,q=d-p;return l===void 0||A>=e||A<0||y&&q>=s}function Y(){var d=Z();if(ge(d))return me(d);a=setTimeout(Y,Zi(d))}function me(d){return a=void 0,C&&n?I(d):(n=i=void 0,o)}function Qi(){a!==void 0&&clearTimeout(a),p=0,n=l=i=a=void 0}function ts(){return a===void 0?o:me(Z())}function gt(){var d=Z(),A=ge(d);if(n=arguments,i=this,l=d,A){if(a===void 0)return k(l);if(y)return clearTimeout(a),a=setTimeout(Y,e),I(l)}return a===void 0&&(a=setTimeout(Y,e)),o}return gt.cancel=Qi,gt.flush=ts,gt}var N=Array.isArray,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,He=/^\w*$/;function Be(t,e){if(N(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||z(t)?!0:He.test(t)||!De.test(t)||e!=null&&t in Object(e)}var qe="[object AsyncFunction]",ze="[object Function]",Ve="[object GeneratorFunction]",Ke="[object Proxy]";function Q(t){if(!f(t))return!1;var e=U(t);return e==ze||e==Ve||e==qe||e==Ke}var tt=j["__core-js_shared__"],bt=function(){var t=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ge(t){return!!bt&&bt in t}var We=Function.prototype,Je=We.toString;function Xe(t){if(t!=null){try{return Je.call(t)}catch{}try{return t+""}catch{}}return""}var ke=/[\\^$.*+?()[\]{}|]/g,Ye=/^\[object .+?Constructor\]$/,Ze=Function.prototype,Qe=Object.prototype,tr=Ze.toString,er=Qe.hasOwnProperty,rr=RegExp("^"+tr.call(er).replace(ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nr(t){if(!f(t)||Ge(t))return!1;var e=Q(t)?rr:Ye;return e.test(Xe(t))}function ir(t,e){return t==null?void 0:t[e]}function et(t,e){var r=ir(t,e);return nr(r)?r:void 0}var D=et(Object,"create");function sr(){this.__data__=D?D(null):{},this.size=0}function or(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ar="__lodash_hash_undefined__",cr=Object.prototype,lr=cr.hasOwnProperty;function ur(t){var e=this.__data__;if(D){var r=e[t];return r===ar?void 0:r}return lr.call(e,t)?e[t]:void 0}var fr=Object.prototype,hr=fr.hasOwnProperty;function dr(t){var e=this.__data__;return D?e[t]!==void 0:hr.call(e,t)}var pr="__lodash_hash_undefined__";function gr(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=D&&e===void 0?pr:e,this}function w(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}w.prototype.clear=sr,w.prototype.delete=or,w.prototype.get=ur,w.prototype.has=dr,w.prototype.set=gr;function mr(){this.__data__=[],this.size=0}function V(t,e){return t===e||t!==t&&e!==e}function K(t,e){for(var r=t.length;r--;)if(V(t[r][0],e))return r;return-1}var Or=Array.prototype,vr=Or.splice;function yr(t){var e=this.__data__,r=K(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():vr.call(e,r,1),--this.size,!0}function br(t){var e=this.__data__,r=K(e,t);return r<0?void 0:e[r][1]}function _r(t){return K(this.__data__,t)>-1}function Sr(t,e){var r=this.__data__,n=K(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function _(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}_.prototype.clear=mr,_.prototype.delete=yr,_.prototype.get=br,_.prototype.has=_r,_.prototype.set=Sr;var _t=et(j,"Map");function xr(){this.size=0,this.__data__={hash:new w,map:new(_t||_),string:new w}}function Er(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function G(t,e){var r=t.__data__;return Er(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Ar(t){var e=G(this,t).delete(t);return this.size-=e?1:0,e}function Tr(t){return G(this,t).get(t)}function jr(t){return G(this,t).has(t)}function wr(t,e){var r=G(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function x(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}x.prototype.clear=xr,x.prototype.delete=Ar,x.prototype.get=Tr,x.prototype.has=jr,x.prototype.set=wr;var Cr="Expected a function";function rt(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Cr);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(rt.Cache||x),r}rt.Cache=x;var Ir=500;function $r(t){var e=rt(t,function(n){return r.size===Ir&&r.clear(),n}),r=e.cache;return e}var Fr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nr=/\\(\\)?/g,Lr=$r(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Fr,function(r,n,i,s){e.push(i?s.replace(Nr,"$1"):n||r)}),e});function Pr(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Mr=1/0,St=$?$.prototype:void 0,xt=St?St.toString:void 0;function Et(t){if(typeof t=="string")return t;if(N(t))return Pr(t,Et)+"";if(z(t))return xt?xt.call(t):"";var e=t+"";return e=="0"&&1/t==-Mr?"-0":e}function Rr(t){return t==null?"":Et(t)}function Ur(t,e){return N(t)?t:Be(t,e)?[t]:Lr(Rr(t))}var Dr=1/0;function Hr(t){if(typeof t=="string"||z(t))return t;var e=t+"";return e=="0"&&1/t==-Dr?"-0":e}function Br(t,e){e=Ur(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Hr(e[r++])];return r&&r==n?t:void 0}function nt(t,e,r){var n=t==null?void 0:Br(t,e);return n===void 0?r:n}const At="%[a-f0-9]{2}",Tt=new RegExp("("+At+")|([^%]+?)","gi"),jt=new RegExp("("+At+")+","gi");function it(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;const r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],it(r),it(n))}function qr(t){try{return decodeURIComponent(t)}catch{let e=t.match(Tt)||[];for(let r=1;r<e.length;r++)t=it(e,r).join(""),e=t.match(Tt)||[];return t}}function zr(t){const e={"%FE%FF":"��","%FF%FE":"��"};let r=jt.exec(t);for(;r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{const i=qr(r[0]);i!==r[0]&&(e[r[0]]=i)}r=jt.exec(t)}e["%C2"]="�";const n=Object.keys(e);for(const i of n)t=t.replace(new RegExp(i,"g"),e[i]);return t}function Vr(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return zr(t)}}function wt(t,e){if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t===""||e==="")return[];const r=t.indexOf(e);return r===-1?[]:[t.slice(0,r),t.slice(r+e.length)]}function Kr(t,e){const r={};if(Array.isArray(e))for(const n of e){const i=Object.getOwnPropertyDescriptor(t,n);i!=null&&i.enumerable&&Object.defineProperty(r,n,i)}else for(const n of Reflect.ownKeys(t)){const i=Object.getOwnPropertyDescriptor(t,n);if(i.enumerable){const s=t[n];e(n,s,t)&&Object.defineProperty(r,n,i)}}return r}const Gr=t=>t==null,Wr=t=>encodeURIComponent(t).replaceAll(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),st=Symbol("encodeFragmentIdentifier");function Jr(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{const i=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[h(e,t),"[",i,"]"].join("")]:[...r,[h(e,t),"[",h(i,t),"]=",h(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[h(e,t),"[]"].join("")]:[...r,[h(e,t),"[]=",h(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[h(e,t),":list="].join("")]:[...r,[h(e,t),":list=",h(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[h(r,t),e,h(i,t)].join("")]:[[n,h(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,h(e,t)]:[...r,[h(e,t),"=",h(n,t)].join("")]}}function Xr(t){let e;switch(t.arrayFormat){case"index":return(r,n,i)=>{if(e=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!e){i[r]=n;return}i[r]===void 0&&(i[r]={}),i[r][e[1]]=n};case"bracket":return(r,n,i)=>{if(e=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[...i[r],n]};case"colon-list-separator":return(r,n,i)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[...i[r],n]};case"comma":case"separator":return(r,n,i)=>{const s=typeof n=="string"&&n.includes(t.arrayFormatSeparator),o=typeof n=="string"&&!s&&S(n,t).includes(t.arrayFormatSeparator);n=o?S(n,t):n;const a=s||o?n.split(t.arrayFormatSeparator).map(l=>S(l,t)):n===null?n:S(n,t);i[r]=a};case"bracket-separator":return(r,n,i)=>{const s=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!s){i[r]=n&&S(n,t);return}const o=n===null?[]:n.split(t.arrayFormatSeparator).map(a=>S(a,t));if(i[r]===void 0){i[r]=o;return}i[r]=[...i[r],...o]};default:return(r,n,i)=>{if(i[r]===void 0){i[r]=n;return}i[r]=[...[i[r]].flat(),n]}}}function Ct(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function h(t,e){return e.encode?e.strict?Wr(t):encodeURIComponent(t):t}function S(t,e){return e.decode?Vr(t):t}function It(t){return Array.isArray(t)?t.sort():typeof t=="object"?It(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function $t(t){const e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function kr(t){let e="";const r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function Ft(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function ot(t){t=$t(t);const e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function at(t,e){e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e},Ct(e.arrayFormatSeparator);const r=Xr(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(const i of t.split("&")){if(i==="")continue;const s=e.decode?i.replaceAll("+"," "):i;let[o,a]=wt(s,"=");o===void 0&&(o=s),a=a===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:S(a,e),r(S(o,e),a,n)}for(const[i,s]of Object.entries(n))if(typeof s=="object"&&s!==null)for(const[o,a]of Object.entries(s))s[o]=Ft(a,e);else n[i]=Ft(s,e);return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((i,s)=>{const o=n[s];return i[s]=o&&typeof o=="object"&&!Array.isArray(o)?It(o):o,i},Object.create(null))}function Nt(t,e){if(!t)return"";e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e},Ct(e.arrayFormatSeparator);const r=o=>e.skipNull&&Gr(t[o])||e.skipEmptyString&&t[o]==="",n=Jr(e),i={};for(const[o,a]of Object.entries(t))r(o)||(i[o]=a);const s=Object.keys(i);return e.sort!==!1&&s.sort(e.sort),s.map(o=>{const a=t[o];return a===void 0?"":a===null?h(o,e):Array.isArray(a)?a.length===0&&e.arrayFormat==="bracket-separator"?h(o,e)+"[]":a.reduce(n(o),[]).join("&"):h(o,e)+"="+h(a,e)}).filter(o=>o.length>0).join("&")}function Lt(t,e){var i;e={decode:!0,...e};let[r,n]=wt(t,"#");return r===void 0&&(r=t),{url:((i=r==null?void 0:r.split("?"))==null?void 0:i[0])??"",query:at(ot(t),e),...e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:S(n,e)}:{}}}function Pt(t,e){e={encode:!0,strict:!0,[st]:!0,...e};const r=$t(t.url).split("?")[0]||"",n=ot(t.url),i={...at(n,{sort:!1}),...t.query};let s=Nt(i,e);s&&(s=`?${s}`);let o=kr(t.url);if(typeof t.fragmentIdentifier=="string"){const a=new URL(r);a.hash=t.fragmentIdentifier,o=e[st]?a.hash:`#${t.fragmentIdentifier}`}return`${r}${s}${o}`}function Mt(t,e,r){r={parseFragmentIdentifier:!0,[st]:!1,...r};const{url:n,query:i,fragmentIdentifier:s}=Lt(t,r);return Pt({url:n,query:Kr(i,e),fragmentIdentifier:s},r)}function Yr(t,e,r){const n=Array.isArray(e)?i=>!e.includes(i):(i,s)=>!e(i,s);return Mt(t,n,r)}const Zr=Object.freeze(Object.defineProperty({__proto__:null,exclude:Yr,extract:ot,parse:at,parseUrl:Lt,pick:Mt,stringify:Nt,stringifyUrl:Pt},Symbol.toStringTag,{value:"Module"}));function Qr(){this.__data__=new _,this.size=0}function tn(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function en(t){return this.__data__.get(t)}function rn(t){return this.__data__.has(t)}var nn=200;function sn(t,e){var r=this.__data__;if(r instanceof _){var n=r.__data__;if(!_t||n.length<nn-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new x(n)}return r.set(t,e),this.size=r.size,this}function L(t){var e=this.__data__=new _(t);this.size=e.size}L.prototype.clear=Qr,L.prototype.delete=tn,L.prototype.get=en,L.prototype.has=rn,L.prototype.set=sn;var W=function(){try{var t=et(Object,"defineProperty");return t({},"",{}),t}catch{}}();function ct(t,e,r){e=="__proto__"&&W?W(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function lt(t,e,r){(r!==void 0&&!V(t[e],r)||r===void 0&&!(e in t))&&ct(t,e,r)}function on(t){return function(e,r,n){for(var i=-1,s=Object(e),o=n(e),a=o.length;a--;){var l=o[t?a:++i];if(r(s[l],l,s)===!1)break}return e}}var an=on(),Rt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ut=Rt&&typeof module=="object"&&module&&!module.nodeType&&module,cn=Ut&&Ut.exports===Rt,Dt=cn?j.Buffer:void 0,Ht=Dt?Dt.allocUnsafe:void 0;function ln(t,e){if(e)return t.slice();var r=t.length,n=Ht?Ht(r):new t.constructor(r);return t.copy(n),n}var Bt=j.Uint8Array;function un(t){var e=new t.constructor(t.byteLength);return new Bt(e).set(new Bt(t)),e}function fn(t,e){var r=e?un(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function hn(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var qt=Object.create,dn=function(){function t(){}return function(e){if(!f(e))return{};if(qt)return qt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function pn(t,e){return function(r){return t(e(r))}}var gn=pn(Object.getPrototypeOf,Object);const zt=gn;var mn=Object.prototype;function Vt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||mn;return t===r}function On(t){return typeof t.constructor=="function"&&!Vt(t)?dn(zt(t)):{}}var vn="[object Arguments]";function Kt(t){return F(t)&&U(t)==vn}var Gt=Object.prototype,yn=Gt.hasOwnProperty,bn=Gt.propertyIsEnumerable,_n=Kt(function(){return arguments}())?Kt:function(t){return F(t)&&yn.call(t,"callee")&&!bn.call(t,"callee")};const ut=_n;var Sn=9007199254740991;function Wt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Sn}function ft(t){return t!=null&&Wt(t.length)&&!Q(t)}function xn(t){return F(t)&&ft(t)}function En(){return!1}var Jt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xt=Jt&&typeof module=="object"&&module&&!module.nodeType&&module,An=Xt&&Xt.exports===Jt,kt=An?j.Buffer:void 0,Tn=kt?kt.isBuffer:void 0,Yt=Tn||En,jn="[object Object]",wn=Function.prototype,Cn=Object.prototype,Zt=wn.toString,In=Cn.hasOwnProperty,$n=Zt.call(Object);function Fn(t){if(!F(t)||U(t)!=jn)return!1;var e=zt(t);if(e===null)return!0;var r=In.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Zt.call(r)==$n}var Nn="[object Arguments]",Ln="[object Array]",Pn="[object Boolean]",Mn="[object Date]",Rn="[object Error]",Un="[object Function]",Dn="[object Map]",Hn="[object Number]",Bn="[object Object]",qn="[object RegExp]",zn="[object Set]",Vn="[object String]",Kn="[object WeakMap]",Gn="[object ArrayBuffer]",Wn="[object DataView]",Jn="[object Float32Array]",Xn="[object Float64Array]",kn="[object Int8Array]",Yn="[object Int16Array]",Zn="[object Int32Array]",Qn="[object Uint8Array]",ti="[object Uint8ClampedArray]",ei="[object Uint16Array]",ri="[object Uint32Array]",u={};u[Jn]=u[Xn]=u[kn]=u[Yn]=u[Zn]=u[Qn]=u[ti]=u[ei]=u[ri]=!0,u[Nn]=u[Ln]=u[Gn]=u[Pn]=u[Wn]=u[Mn]=u[Rn]=u[Un]=u[Dn]=u[Hn]=u[Bn]=u[qn]=u[zn]=u[Vn]=u[Kn]=!1;function ni(t){return F(t)&&Wt(t.length)&&!!u[U(t)]}function ii(t){return function(e){return t(e)}}var Qt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,H=Qt&&typeof module=="object"&&module&&!module.nodeType&&module,si=H&&H.exports===Qt,ht=si&&m.process,te=function(){try{var t=H&&H.require&&H.require("util").types;return t||ht&&ht.binding&&ht.binding("util")}catch{}}(),ee=te&&te.isTypedArray,re=ee?ii(ee):ni;function dt(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var oi=Object.prototype,ai=oi.hasOwnProperty;function ci(t,e,r){var n=t[e];(!(ai.call(t,e)&&V(n,r))||r===void 0&&!(e in t))&&ct(t,e,r)}function li(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=n?n(r[a],t[a],a,r,t):void 0;l===void 0&&(l=t[a]),i?ct(r,a,l):ci(r,a,l)}return r}function ui(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var fi=9007199254740991,hi=/^(?:0|[1-9]\d*)$/;function ne(t,e){var r=typeof t;return e=e??fi,!!e&&(r=="number"||r!="symbol"&&hi.test(t))&&t>-1&&t%1==0&&t<e}var di=Object.prototype,pi=di.hasOwnProperty;function gi(t,e){var r=N(t),n=!r&&ut(t),i=!r&&!n&&Yt(t),s=!r&&!n&&!i&&re(t),o=r||n||i||s,a=o?ui(t.length,String):[],l=a.length;for(var p in t)(e||pi.call(t,p))&&!(o&&(p=="length"||i&&(p=="offset"||p=="parent")||s&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||ne(p,l)))&&a.push(p);return a}function mi(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Oi=Object.prototype,vi=Oi.hasOwnProperty;function yi(t){if(!f(t))return mi(t);var e=Vt(t),r=[];for(var n in t)n=="constructor"&&(e||!vi.call(t,n))||r.push(n);return r}function ie(t){return ft(t)?gi(t,!0):yi(t)}function bi(t){return li(t,ie(t))}function _i(t,e,r,n,i,s,o){var a=dt(t,r),l=dt(e,r),p=o.get(l);if(p){lt(t,r,p);return}var g=s?s(a,l,r+"",t,e,o):void 0,y=g===void 0;if(y){var C=N(l),I=!C&&Yt(l),k=!C&&!I&&re(l);g=l,C||I||k?N(a)?g=a:xn(a)?g=hn(a):I?(y=!1,g=ln(l,!0)):k?(y=!1,g=fn(l,!0)):g=[]:Fn(l)||ut(l)?(g=a,ut(a)?g=bi(a):(!f(a)||Q(a))&&(g=On(l))):y=!1}y&&(o.set(l,g),i(g,l,n,s,o),o.delete(l)),lt(t,r,g)}function se(t,e,r,n,i){t!==e&&an(e,function(s,o){if(i||(i=new L),f(s))_i(t,e,o,r,se,n,i);else{var a=n?n(dt(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),lt(t,o,a)}},ie)}function oe(t){return t}function Si(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var ae=Math.max;function xi(t,e,r){return e=ae(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=ae(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),Si(t,this,a)}}function Ei(t){return function(){return t}}var Ai=W?function(t,e){return W(t,"toString",{configurable:!0,enumerable:!1,value:Ei(e),writable:!0})}:oe;const Ti=Ai;var ji=800,wi=16,Ci=Date.now;function Ii(t){var e=0,r=0;return function(){var n=Ci(),i=wi-(n-r);if(r=n,i>0){if(++e>=ji)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var $i=Ii(Ti);function Fi(t,e){return $i(xi(t,e,oe),t+"")}function Ni(t,e,r){if(!f(r))return!1;var n=typeof e;return(n=="number"?ft(r)&&ne(e,r.length):n=="string"&&e in r)?V(r[e],t):!1}function Li(t){return Fi(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&Ni(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,s)}return e})}var ce=Li(function(t,e,r){se(t,e,r)});const X=class X{constructor(e,{config:r,params:n}={}){c(this,"hasAbortControllerApi",!0);c(this,"abortController");c(this,"abortSignal");c(this,"baseUrl");c(this,"config");c(this,"params");this.baseUrl=e,this.config=r,this.params=n}async requestAjaxJson(e){this.renewAbortController();const r=this.formRequestUrl(e);let n;try{n=await(await fetch(r,this.requestConfig)).json()}catch(i){console.error(i)}return n}renewAbortController(){var e;if(this.hasAbortControllerApi){(e=this.abortController)==null||e.abort("Has newer request");try{const r=new AbortController;this.abortController=r,this.abortSignal=r.signal}catch{this.hasAbortControllerApi=!1}}}formRequestUrl(e){const r=this.params||e?{...this.params,...e}:null,n=r?`?${Zr.stringify(r,{skipNull:!0,skipEmptyString:!0})}`:"";return this.baseUrl+n}get requestConfig(){return ce({},this.config||{},X.defaultRequestConfig,{signal:this.abortSignal})}};c(X,"defaultRequestConfig",{method:"get",headers:{"Content-Type":"application/json; charset=UTF-8"}});let pt=X;class le{constructor(){c(this,"listeners",{})}getOrCreateListenerList(e){let r=this.listeners[e];if(r)return r;const n=new Set;return this.listeners[e]=n,n}multiOn(e){for(const r in e)this.on(r,e[r])}on(e,r){this.getOrCreateListenerList(e).add(r)}off(e,r){this.getOrCreateListenerList(e).delete(r)}emit(e,r){this.getOrCreateListenerList(e).forEach(i=>{i(r)})}}const Pi={ru:{clearButtonText:"Очистить",toggleButtonText:"Открыть/Закрыть",notFoundHintText:"Ничего не найдено",searchHintText:"Начните печатать для поиска вариантов",placeholderText:"Выберите..."},en:{clearButtonText:"Clear",toggleButtonText:"Toggle Open/Close",notFoundHintText:"Not found",searchHintText:"Start typing for get options",placeholderText:"Choose..."}};function Mi(t="en",e){const r=Pi[t];return e?ce({},r,e):r}function J(t){const e=document.createElement("div");return e.innerHTML=t.trim(),e.firstElementChild}function Ri(t){return typeof t=="string"?t.trim():t}function ue(t){if(typeof t!="string")return t;const e=Number(t);return Number.isNaN(e)?t:e}function Ui(t){return Object.entries(t).reduce((e,[r,n])=>({...e,[r]:`.${n}`}),{})}function Di(t,e){const r=t.getBoundingClientRect(),n=e.getBoundingClientRect();return n.top>=r.top&&n.bottom<=r.bottom}function fe(t,e){!t||!e||Di(t,e)||e.scrollIntoView({block:"nearest",behavior:"instant"})}function he(t,e){return t.length===0||e>=t.length||e<0}function Hi(t,e){if(t.length===0)return null;let r=e+1;return he(t,r)?t[0]:t[r]}function Bi(t,e){if(t.length===0)return null;let r=e-1;return he(t,r)?t[t.length-1]:t[r]}const M=class M{constructor(e,r){c(this,"options",[]);c(this,"firstFetchedOptions",[]);c(this,"nativeOptions");c(this,"emitter");c(this,"ajax");c(this,"ajaxSearchId",0);c(this,"ajaxSettings");c(this,"translation");c(this,"placeholder");c(this,"onAjaxSearch",e=>{if(e){this.ajaxSearchDebounced(e).catch(console.error);return}this.ajaxSearchId+=1,this.ui.isLoading=!1,this.options=this.firstFetchedOptions,this.ui.options=this.firstFetchedOptions});c(this,"ajaxSearch",async e=>{this.ajaxSearchId+=1;const r=this.ajaxSearchId;this.ui.isLoading=!0;const n=await this.requestOptions({[this.ajaxSearchKey()]:e});if(r!==this.ajaxSearchId){this.ui.updateHint();return}this.ui.isLoading=!1,this.ui.options=n,this.options=n});c(this,"ajaxSearchDebounced",Ue(this.ajaxSearch,350,{leading:!0,trailing:!0}));c(this,"onFilterSearch",e=>{this.ui.options=this.filterOptions(e)});var n;this.translation=Mi(r==null?void 0:r.lang,r==null?void 0:r.translation),this.placeholder=((n=r==null?void 0:r.translation)==null?void 0:n.placeholderText)||e.getAttribute("placeholder")||this.translation.placeholderText,this.nativeOptions=M.parseOptions(e),this.ajaxSettings=r==null?void 0:r.ajax,this.emitter=new le,r!=null&&r.ajax&&(this.ajax=new pt(r.ajax.url,{config:r.ajax.config,params:r.ajax.params}))}isAjaxSearch(){var e;return((e=this.ajaxSettings)==null?void 0:e.mode)==="search"}ajaxSearchKey(){return this.isAjaxSearch()?this.ajaxSettings.searchKey:""}resolveInitOptions(e){var r;switch((r=this.ajaxSettings)==null?void 0:r.mode){case"fetch":case"search":this.options=[],this.requestFetchModeOptions().catch(console.error);break;case void 0:this.options=this.nativeOptions,this.ui.options=this.options;break}}async requestFetchModeOptions(){this.ui.isLoading=!0;const e=await this.requestOptions();this.ui.isLoading=!1,this.firstFetchedOptions=e,this.options=e,this.ui.options=e}reFetchOptions(){return this.ajax?this.requestFetchModeOptions():Promise.resolve()}initUi(){this.ui.options=this.options,this.ui.activeOption=this.activeOption,this.ui.emitter.multiOn({clear:this.clear,search:this.onFilterSearch,ajaxSearch:this.onAjaxSearch,"option:click":this.onOptionClick})}filterOptions(e){const r=e.trim(),{options:n}=this;if(!r)return n;const i=new RegExp(r,"i");return n.filter(s=>i.test(s.label))}async requestOptions(e){if(!this.ajax)return[];const r=await this.ajax.requestAjaxJson(e);return this.optionsFromJson(r)}optionsFromJson(e){if(!this.ajaxSettings)return[];const{dataKey:r="",labelKey:n="label",valueKey:i="value"}=this.ajaxSettings,s=r?nt(e,r):e;return Array.isArray(s)?s.map(o=>({label:Ri(nt(o,n)),value:ue(nt(o,i))})):[]}static fromConvertableOptions(e){return e===null?[]:(Array.isArray(e)?e.map(this.fromConvertableOption):[this.fromConvertableOption(e)]).filter(this.isNotEmptyOption)}static stringOrOptionToOption(e){switch(typeof e){case"string":case"number":return{label:e.toString(),value:e};default:return e}}static isNotEmptyOption(e){return e!==null&&!!(e.value.toString()&&e.label)}static parseOptions(e){return Array.from(e.options).map(r=>({selected:r.selected,label:r.innerText.trim(),value:ue(r.value)})).filter(r=>r.value)}};c(M,"fromConvertableOption",e=>{const r=e!==null?M.stringOrOptionToOption(e):null;return M.isNotEmptyOption(r)?r:null});let P=M;const b="f-select",O=Object.freeze({ROOT:`${b}`,INNER:`${b}__inner`,SEARCH:`${b}__search`,DROPDOWN:`${b}__dropdown`,CLEAR:`${b}__clear`,TOGGLE:`${b}__toggle`,LIST:`${b}__list`,OPTIONS:`${b}__option`,HINT:`${b}__hint`,AREA:`${b}__input-area`}),E=Object.freeze(Ui(O)),qi=t=>J(`
    <div class="${O.ROOT}">
        <div class="${O.INNER}">
            <div class="${O.AREA}"> 
                <input type="text" class="${O.SEARCH}" />      
            </div>
            <div class="f-select__actions">
                <button type="button" class="${O.CLEAR}" title="${t.clearButtonText}">
                    ${t.clearButtonText}
                </button>
                <button type="button" class="${O.TOGGLE}" title="${t.toggleButtonText}">
                    ${t.toggleButtonText}
                </button>      
            </div>
        </div>
        <div class="${O.DROPDOWN}">
            <div class="${O.LIST}"></div>
            <div class="${O.HINT}"></div>
        </div>
    </div>
`),zi=t=>J(`
    <div class="${O.OPTIONS}">${t.label}</div>
`),Vi=t=>J(`
    <option value="${t.value}">${t.label}</option>  
`);class v{static createSelectStructure(e){const r=qi(e),n=i=>r.querySelector(i);return{root:r,inner:n(E.INNER),dropdown:n(E.DROPDOWN),search:n(E.SEARCH),clear:n(E.CLEAR),toggle:n(E.TOGGLE),list:n(E.LIST),options:[],hint:n(E.HINT),area:n(E.AREA)}}static createNativeOptionEl(e){return Vi(e)}static createOptionEl(e){const r=zi(e);return r.dataset.option=JSON.stringify(e),r}static getOptionData(e){return JSON.parse(e.dataset.option)}static isOptionEl(e){return e instanceof HTMLDivElement&&!!e.dataset.option}static removeElement(e){e.remove()}static removeHTMLCollection(e){Array.from(e).forEach(this.removeElement)}}function de(t){return t===null||Array.isArray(t)&&t.length===0}class B{constructor(e){c(this,"elements");c(this,"emitter",new le);c(this,"_options",[]);c(this,"_renderOutdated",!0);c(this,"nativeSelect");c(this,"translation");c(this,"placeholder");c(this,"isAjaxSearch");c(this,"_isOpen",!1);c(this,"_isLoading",!1);c(this,"_selectedOption",null);c(this,"onKeydown",e=>{switch(e.key){case"Escape":this.close();break;case"Enter":case"NumpadEnter":this.makeSelectedOptionActive();break;case"ArrowUp":this.makePrevOptionSelected();break;case"ArrowDown":this.makeNextOptionSelected()}});c(this,"addNativeSelectOption",e=>{e.selected=!0,this.nativeSelect.append(e)});c(this,"createOptionEl",e=>{const r=v.createOptionEl(e);return r.addEventListener("mouseover",this.onOptionHover),r.addEventListener("click",this.onOptionClick),r});c(this,"onOptionHover",e=>{v.isOptionEl(e.target)&&(this.selectedOption=e.target)});c(this,"toggleOptionElActiveModIfNeeded",e=>{this.toggleOptionElActiveMod(e,this.isOptionElNeedToBeActive(e))});c(this,"open",()=>this.isOpen=!0);c(this,"close",()=>this.isOpen=!1);c(this,"onClearClick",e=>{e.stopPropagation(),this.emitter.emit("clear",void 0),this.close()});c(this,"onSearchInput",()=>{this.emitSearch()});c(this,"onOptionClick",e=>{if(this.selectedOption,v.isOptionEl(e.target)){const r=v.getOptionData(e.target);this.emitter.emit("option:click",r)}});var r;this.elements=v.createSelectStructure(e.translation),this.nativeSelect=e.nativeSelect,this.translation=e.translation,this.isAjaxSearch=e.isAjaxSearch,this.placeholder=e.placeholder,this.listen(),(r=this.nativeSelect.parentNode)==null||r.insertBefore(this.elements.root,this.nativeSelect),this.elements.root.append(this.nativeSelect),this.toggleMod("_styled",!0)}set hint(e){this.elements.hint.innerText=e,this.toggleMod("_hint",!!e)}get selectedOption(){return this._selectedOption}set selectedOption(e){var r;(r=this._selectedOption)==null||r.classList.remove("_selected"),e==null||e.classList.add("_selected"),this._selectedOption=e}get selectedIdx(){const{selectedOption:e}=this;return this.elements.options.findIndex(r=>r===e)}listen(){const{inner:e,search:r,dropdown:n,clear:i}=this.elements;e.addEventListener("mousedown",s=>{s.preventDefault()}),e.addEventListener("click",this.open),r.addEventListener("focus",this.open),r.addEventListener("blur",this.close),r.addEventListener("input",this.onSearchInput),i.addEventListener("click",this.onClearClick),n.addEventListener("mousedown",s=>{s.preventDefault()})}toggleWindowListeners(e){e?window.addEventListener("keydown",this.onKeydown):window.removeEventListener("keydown",this.onKeydown)}makeSelectedOptionActive(){const{selectedOption:e}=this;if(!e)return;if(!this.elements.options.some(n=>e===n)){this.selectedOption=null;return}this.emitter.emit("option:click",v.getOptionData(e))}makeNextOptionSelected(){this.selectedOption=Hi(this.elements.options,this.selectedIdx),fe(this.elements.list,this.selectedOption)}makePrevOptionSelected(){this.selectedOption=Bi(this.elements.options,this.selectedIdx),fe(this.elements.list,this.selectedOption)}get isLoading(){return this._isLoading}updatePlaceholder(e){this.elements.search.placeholder=e}onActiveChange(){const{_activeOption:e}=this,r=de(e);this.toggleMod("_filled",!r)}set isLoading(e){this._isLoading=e,this.toggleMod("_loading",e)}get searchValue(){return this.elements.search.value}set searchValue(e){this.elements.search.value=e,this.emitSearch()}get needRender(){return this.isOpen&&this._renderOutdated}emitSearch(){this.isAjaxSearch?this.emitter.emit("ajaxSearch",this.searchValue):this.emitter.emit("search",this.searchValue)}get isOpen(){return this._isOpen}set isOpen(e){e!==this._isOpen&&(this._isOpen=e,this.toggleMod("_opened",e),this.toggleWindowListeners(e),e?this.onOpened():this.onClosed())}set options(e){this._options=e,this._renderOutdated=!0,this.renderOptionEls()}updateNativeSelectValue(e){if(!this.nativeSelect)return;const r=e.map(v.createNativeOptionEl);v.removeHTMLCollection(this.nativeSelect.options),r.forEach(this.addNativeSelectOption)}updateHint(){this._options.length===0?this.hint=!this.searchValue&&this.isAjaxSearch?this.translation.searchHintText:this.translation.notFoundHintText:this.hint=""}renderOptionEls(e){if(!e&&!this.needRender)return;if(this.destroyOptionEls(),this.elements.options=[],this._renderOutdated=!1,this._options.length===0){this.updateHint();return}this.hint="";const r=this.createOptionEls(this._options);this.elements.list.append(...r),this.elements.options=r,this.updateOptionElsActiveMod()}createOptionEls(e){return e.map(this.createOptionEl)}updateOptionElsActiveMod(){const e=de(this._activeOption)?this.removeOptionElActiveMod:this.toggleOptionElActiveModIfNeeded;this.elements.options.forEach(e)}removeOptionElActiveMod(e){e.classList.remove("_active")}toggleOptionElActiveMod(e,r){e.classList.toggle("_active",r)}destroyOptionEls(){this.elements.options.forEach(v.removeElement),this.elements.options=[]}onOpened(){this.elements.search.focus(),this.renderOptionEls()}onClosed(){this.elements.search.blur(),this.searchValue=""}toggleMod(e,r){this.elements.root.classList.toggle(e,r)}static isSameOption(e,r){return e.label===r.label&&e.value===r.value}}class Ki extends B{constructor(r){super(r);c(this,"_activeOption",null)}set activeOption(r){var n;this._activeOption=r,this.onActiveChange(),this.updateOptionElsActiveMod(),this.updateNativeSelectValue(r?[r]:[]),this.updatePlaceholder(((n=this._activeOption)==null?void 0:n.label)||this.placeholder)}isOptionElNeedToBeActive(r){const n=v.getOptionData(r);return B.isSameOption(n,this._activeOption)}}class Gi extends P{constructor(r,n){super(r,n);c(this,"activeOption",null);c(this,"ui");c(this,"onOptionClick",r=>{this.value=r,this.ui.close()});c(this,"clear",()=>{this.value=null});this.ui=new Ki({nativeSelect:r,translation:this.translation,placeholder:this.placeholder,isAjaxSearch:this.isAjaxSearch()}),this.initUi(),this.initValue(),this.resolveInitOptions(r)}initValue(){this.value=this.nativeOptions.find(r=>r.selected)||null}get value(){var r;return((r=this.activeOption)==null?void 0:r.value)||""}set value(r){this.activeOption=P.fromConvertableOption(r),this.ui.activeOption=this.activeOption,this.emitter.emit("change",this.value)}}const Wi="_multiple",Ji=t=>J(`
    <div class="f-select__active-option">
        <div class="f-select__active-option-text">                
            ${t.label}
        </div>
        <button type="button" class="f-select__active-option-close"></button>
    </div>
`);class Xi extends B{constructor(r){super(r);c(this,"_activeOption",[]);c(this,"activeOptionsEls",[]);this.toggleMod(Wi,!0),this.updatePlaceholder(this.placeholder)}updateActiveOptionsEl(){this.activeOptionsEls.forEach(n=>n.remove());const r=this._activeOption.map(Ji);r.forEach((n,i)=>{n.querySelector("button").addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),this.emitter.emit("option:remove",i)})}),this.elements.area.prepend(...r),this.activeOptionsEls=r}set activeOption(r){this._activeOption=r,this.onActiveChange(),this.updateOptionElsActiveMod(),this.updateNativeSelectValue(r),this.updateActiveOptionsEl()}isOptionElNeedToBeActive(r){const n=v.getOptionData(r);return this._activeOption.some(i=>B.isSameOption(i,n))}}class ki extends P{constructor(r,n){super(r,n);c(this,"activeOption",[]);c(this,"ui");c(this,"onOptionClick",r=>{this.toggleActiveOption(r)});c(this,"removeActiveOption",r=>{const n=[...this.activeOption];n.splice(r,1),this.value=n});c(this,"clear",()=>{this.value=[]});this.ui=new Xi({nativeSelect:r,translation:this.translation,placeholder:this.placeholder,isAjaxSearch:this.isAjaxSearch()}),this.initUi(),this.initValue(),this.resolveInitOptions(r)}initUi(){super.initUi(),this.ui.emitter.on("option:remove",this.removeActiveOption)}initValue(){this.value=this.nativeOptions.filter(r=>r.selected)}get value(){return this.activeOption.map(r=>r.value)}set value(r){this.activeOption=P.fromConvertableOptions(r),this.ui.activeOption=this.activeOption,this.emitter.emit("change",this.value)}findActiveOptionIdx(r){return this.activeOption.findIndex(n=>B.isSameOption(n,r))}toggleActiveOption(r){const n=this.findActiveOptionIdx(r);n===-1?this.addActiveOption(r):this.removeActiveOption(n)}addActiveOption(r){this.value=[...this.activeOption,r]}}const pe=Symbol("select");class Yi{constructor(){}static init(e,r){let n=e[pe];if(!n){const i=e.multiple?ki:Gi;n=new i(e,r),e[pe]=n}return n}static initAll(e=document.body,r){const n=e.querySelectorAll("select");return Array.from(n).map(i=>this.init(i,r))}}return Yi});
